import React, { useState } from 'react';

const ShowKeyModal = () => {
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [recoveryWords, setRecoveryWords] = useState([]);
  const [isCopied, setIsCopied] = useState(false);

  // Function to generate 12 random words (for simplicity, we'll use a small list of words)
  const generateRecoveryWords = () => {
    const wordList = ["apple", "banana", "cherry", "date", "elephant", "fish", "grape", "honey", "igloo", "jungle", "kite", "lemon"];
    const selectedWords = [];
    
    while (selectedWords.length < 12) {
      const randomWord = wordList[Math.floor(Math.random() * wordList.length)];
      if (!selectedWords.includes(randomWord)) {
        selectedWords.push(randomWord);
      }
    }
    
    setRecoveryWords(selectedWords);
  };

  // Function to handle opening the modal and generating words
  const handleShowKey = () => {
    generateRecoveryWords();
    setIsModalOpen(true);
  };

  // Function to copy words to clipboard
  const handleCopyToClipboard = () => {
    const textToCopy = recoveryWords.join(' ');
    navigator.clipboard.writeText(textToCopy).then(() => {
      setIsCopied(true);
      setTimeout(() => setIsCopied(false), 2000); // Reset copied status after 2 seconds
    });
  };

  return (
    <div style={styles.container}>
      <button onClick={handleShowKey} style={styles.showKeyBtn}>Show Key</button>

      {isModalOpen && (
        <div style={styles.modal}>
          <div style={styles.modalContent}>
            <h2 style={styles.modalTitle}>Your 12-Word Recovery Phrase</h2>
            <p style={styles.wordList}>
              {recoveryWords.map((word, index) => (
                <span key={index} style={styles.word}>{word}</span>
              ))}
            </p>
            <button
              onClick={handleCopyToClipboard}
              style={styles.copyBtn}
            >
              Copy to Clipboard
            </button>
            {isCopied && <p style={styles.copiedMessage}>Copied to clipboard!</p>}
            <button onClick={() => setIsModalOpen(false)} style={styles.closeBtn}>Close</button>
          </div>
        </div>
      )}
    </div>
  );
};

const styles = {
  container: {
    display: 'flex',
    justifyContent: 'center',
    alignItems: 'center',
    flexDirection: 'column',
    padding: '20px',
    color: 'white',
  },
  showKeyBtn: {
    padding: '10px 20px',
    backgroundColor: '#007bff',  // Button color matching your app's theme
    color: 'white',
    border: 'none',
    borderRadius: '5px',
    cursor: 'pointer',
    fontSize: '16px',
    marginBottom: '20px',
  },
  modal: {
    position: 'fixed',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    backgroundColor: 'rgba(0, 0, 0, 0.7)',
    display: 'flex',
    justifyContent: 'center',
    alignItems: 'center',
    zIndex: 1000,
  },
  modalContent: {
    backgroundColor: '#333',  // Dark background to match your app's theme
    padding: '30px',
    borderRadius: '10px',
    width: '90%',
    maxWidth: '600px',
    textAlign: 'center',
  },
  modalTitle: {
    fontSize: '20px',
    marginBottom: '20px',
    color: 'white',
  },
  wordList: {
    display: 'flex',
    flexWrap: 'wrap',
    justifyContent: 'center',
    gap: '10px',
    marginBottom: '20px',
  },
  word: {
    fontSize: '16px',
    backgroundColor: '#444',  // Background color to match your app's theme
    padding: '8px 12px',
    borderRadius: '5px',
    boxShadow: '0px 0px 5px rgba(0, 0, 0, 0.3)',
  },
  copyBtn: {
    padding: '10px 20px',
    backgroundColor: '#28a745', // Green to indicate success (copy action)
    color: 'white',
    border: 'none',
    borderRadius: '5px',
    cursor: 'pointer',
    fontSize: '16px',
    marginTop: '20px',
  },
  copiedMessage: {
    color: 'green',
    marginTop: '10px',
    fontSize: '14px',
  },
  closeBtn: {
    padding: '10px 20px',
    backgroundColor: 'red',  // Red to indicate close action
    color: 'white',
    border: 'none',
    borderRadius: '5px',
    cursor: 'pointer',
    fontSize: '16px',
    marginTop: '20px',
  },
};

export default ShowKeyModal;
